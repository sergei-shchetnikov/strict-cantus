# Strict Cantus

Программа для генерации одноголосных мелодий (cantus firmus) в строгом стиле.

## Описание

Strict Cantus автоматически генерирует мелодии, соответствующие следующим правилам:

- Мелодия начинается и заканчивается в тонике
- Максимальный диапазон - децима
- Последние два шага должны быть поступенными
- Избегается чрезмерное движение в одном направлении (более 5 нот)
- Скачки подготавливаются и заполняются противоположным движением
- Соблюдается правило кульминации
- Минимум 2 изменения направления движения
- Нет повторений одной высоты более 4 раз
- Нет повторяющихся подряд паттернов и секвенций
- Нет опевания септимы
- Вводный тон используется по правилам
- Нет двух скачков подряд в начале
- Соблюдаются правила запрещающие тритон

## Установка и запуск

1. Убедитесь, что у вас установлен Python 3.8 или выше
2. Установите необходимые зависимости:
```bash
pip install music21
```

3. Запустите программу:
```bash
python generator.py [параметры]
```

### Параметры командной строки:

- `--melody_length N` - длина генерируемой мелодии (по умолчанию: 8)
- `--step_threshold N` - минимальное количество поступенных ходов (по умолчанию: 4)
- `--save` - сохранить сгенерированные мелодии в базу данных SQLite
- `--show` - показать ноты сгенерированных мелодий в MuseScore

Примеры использования:
```bash
# Генерация мелодий длиной 11 нот с отображением результата
python generator.py --melody_length 11 --show

# Генерация и сохранение в базу данных
python generator.py --melody_length 8 --step_threshold 5 --save
```

## Структура проекта

- `generator.py` - основной файл с логикой генерации мелодий
- `cantus.py` - класс для представления cantus firmus
- `converter.py` - функции для конвертации между различными представлениями мелодии
- `general_rules.py` - правила построения мелодии
- `mode_rules.py` - правила для различных ладов

## База данных

Сгенерированные мелодии могут быть сохранены в SQLite базу данных. Имя файла базы данных формируется автоматически на основе параметров генерации: `melodies_<длина>_<порог_шагов>.db`

## Автор

- Сергей Щетников